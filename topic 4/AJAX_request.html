<!Doctype html>
<html>
    <head>
        <link rel="stylesheet" href="style_ajax.css">
    </head>
    <body>
        <div class="wrapper">
            <h2>AJAX requesting a JSON file</h2>
            <p>Click to request meal plan</p>
            <button id="btn">Get Meals</button>
            <div id="mealInfo"></div>
        </div><hr>
        <div class="explain">
            <p>Info from <i>"https://raw.githubusercontent.com/Pickett-Matthew/Pickett-Matthew.github.io/master/week%204/meal_data.json"</i>
            was called which contains JSON data with the meals. 
            </p>
        </div>
    </body>
    
    <script>
        
        var mInfo = document.getElementById("mealInfo");
        
        mInfo.style.visibility = "hidden";
        //variable to control the button
        var btn = document.getElementById("btn");
        
        //event listener pays attention to when the button is hit
        //embedded anonymous function
        btn.addEventListener("click", function() {
            
            var request = new XMLHttpRequest();
            
            request.open('GET', 'https://raw.githubusercontent.com/Pickett-Matthew/Pickett-Matthew.github.io/master/week%204/meal_data.json');
            request.onload = function() {
                var data = JSON.parse(request.responseText);
                displayMeals(data);
            };
            request.send();
        });
        
        function displayMeals(myData) {
            mInfo.style.visibility = "visible";
            var displayString = "";
            
            for(var i = 0; i < myData.length; i++) {
                displayString += "For breakfast we are having " + myData[i].breakfast
                + ". <br>" + "For Lunch we will be having a " + myData[i].lunch + ". <br>" 
                + "Dinner will be " + myData[i].dinner + ".";
            }
            
            mInfo.insertAdjacentHTML('beforeend', displayString);
            
        };
    </script>
    
</html>
